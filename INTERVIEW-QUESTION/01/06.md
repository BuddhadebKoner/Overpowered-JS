# `var` - Function Scoped Variable

## Code
```javascript
for (var i = 0; i < 10; i++) {
   setTimeout(() => console.log(i), 0);
}
```

---

## Memory & Execution Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                    CALL STACK                                    │
├─────────────────────────────────────────────────────────────────┤
│                    Global Context                                │
│                    (var i in scope)                              │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                    HEAP MEMORY                                   │
├─────────────────────────────────────────────────────────────────┤
│ Function/Global Scope                                            │
│                                                                  │
│ i: 0 → 1 → 2 → 3 → ... → 10 (SINGLE variable)                  │
│                                                                  │
│ ┌────────────────────────────────────────────────────────┐      │
│ │ Callback0 ──┐                                          │      │
│ │ Callback1 ──┤                                          │      │
│ │ Callback2 ──┤  All reference the SAME i               │      │
│ │ Callback3 ──┤  in Global/Function Scope               │      │
│ │ ...      ... ├─────────────→ i = 10                    │      │
│ │ Callback9 ──┘               (after loop ends)         │      │
│ └────────────────────────────────────────────────────────┘      │
└─────────────────────────────────────────────────────────────────┘
```

---

## Event Loop Execution

```
CALLBACK QUEUE
┌─────────────────────────────────────────────────────┐
│ Callback0 ──┐                                       │
│ Callback1 ──┤                                       │
│ Callback2 ──┤ All point to                         │
│ Callback3 ──┤ the SAME i                           │
│ Callback4 ──├──────→ i = 10 (loop ended)           │
│ Callback5 ──┤                                       │
│ Callback6 ──┤                                       │
│ Callback7 ──┤                                       │
│ Callback8 ──┤                                       │
│ Callback9 ──┘                                       │
└─────────────────────────────────────────────────────┘
         ↓ Execute
    CONSOLE OUTPUT
    ┌──────────────────────────────┐
    │ 10 10 10 10 10 10 10 10 10 10│ ✗ WRONG
    └──────────────────────────────┘
```

---

## Key Insight

| Aspect | Detail |
|--------|--------|
| **Scope Type** | Function Scope (single) |
| **Variables** | 1 shared `i` variable |
| **Closure** | All callbacks reference same `i` |
| **Value at execution** | `i = 10` (loop completed) |
| **Result** | ✗ Wrong: all 10s |